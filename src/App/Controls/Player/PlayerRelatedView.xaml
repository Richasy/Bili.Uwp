<local:PlayerComponent
    x:Class="Richasy.Bili.App.Controls.PlayerRelatedView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:loc="using:Richasy.Bili.Locator.Uwp"
    xmlns:local="using:Richasy.Bili.App.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:trigger="using:AdaptiveTriggerLibrary.Triggers.UserInterfaceTriggers"
    xmlns:uwp="using:Richasy.Bili.ViewModels.Uwp"
    d:DesignHeight="300"
    d:DesignWidth="400"
    mc:Ignorable="d">

    <Grid CornerRadius="{StaticResource ControlCornerRadius}" RowSpacing="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="LayoutGroup">
                <VisualState x:Name="SideState">
                    <VisualState.StateTriggers>
                        <trigger:WindowWidthTrigger Condition="{StaticResource MediumWindowThresholdWidth}" />
                    </VisualState.StateTriggers>
                </VisualState>
                <VisualState x:Name="RowState">
                    <VisualState.StateTriggers>
                        <trigger:WindowWidthTrigger Condition="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="RelatedVideoView.MaxWidth" Value="999" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <TextBlock
            Style="{StaticResource BodyTextBlockStyle}"
            HorizontalAlignment="Left"
            FontWeight="Bold"
            Text="{loc:LocaleLocator Name=RelatedVideos}" />
        <ScrollViewer
            Grid.Row="1"
            HorizontalScrollMode="Disabled"
            VerticalScrollBarVisibility="Hidden">
            <Grid>
                <local:VerticalRepeaterView
                    x:Name="RelatedVideoView"
                    MaxWidth="380"
                    HeaderVisibility="Collapsed"
                    ItemOrientation="Horizontal"
                    ItemsSource="{x:Bind ViewModel.RelatedVideoCollection}">
                    <local:VerticalRepeaterView.ItemTemplate>
                        <DataTemplate x:DataType="uwp:VideoViewModel">
                            <local:VideoItem
                                IsShowDanmakuCount="True"
                                IsShowPlayCount="True"
                                ViewModel="{x:Bind}" />
                        </DataTemplate>
                    </local:VerticalRepeaterView.ItemTemplate>
                </local:VerticalRepeaterView>
            </Grid>
        </ScrollViewer>
    </Grid>
</local:PlayerComponent>
